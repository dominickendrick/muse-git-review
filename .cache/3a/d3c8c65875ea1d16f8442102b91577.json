{"id":"../node_modules/muse-js/dist/lib/muse-parse.js","dependencies":[{"name":"/Users/dominic_kendrick/code/muse-git-review/node_modules/muse-js/dist/lib/muse-parse.js.map","includedInParent":true,"mtime":1574677530617},{"name":"/Users/dominic_kendrick/code/muse-git-review/package.json","includedInParent":true,"mtime":1574683923823},{"name":"/Users/dominic_kendrick/code/muse-git-review/node_modules/muse-js/package.json","includedInParent":true,"mtime":1574677530617},{"name":"rxjs/operators","loc":{"line":3,"column":26},"parent":"/Users/dominic_kendrick/code/muse-git-review/node_modules/muse-js/dist/lib/muse-parse.js","resolved":"/Users/dominic_kendrick/code/muse-git-review/node_modules/rxjs/_esm5/operators/index.js"}],"generated":{"js":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar operators_1 = require(\"rxjs/operators\");\r\nfunction parseControl(controlData) {\r\n    return controlData.pipe(operators_1.concatMap(function (data) { return data.split(''); }), operators_1.scan(function (acc, value) {\r\n        if (acc.indexOf('}') >= 0) {\r\n            return value;\r\n        }\r\n        else {\r\n            return acc + value;\r\n        }\r\n    }, ''), operators_1.filter(function (value) { return value.indexOf('}') >= 0; }), operators_1.map(function (value) { return JSON.parse(value); }));\r\n}\r\nexports.parseControl = parseControl;\r\nfunction decodeUnsigned12BitData(samples) {\r\n    var samples12Bit = [];\r\n    // tslint:disable:no-bitwise\r\n    for (var i = 0; i < samples.length; i++) {\r\n        if (i % 3 === 0) {\r\n            samples12Bit.push(samples[i] << 4 | samples[i + 1] >> 4);\r\n        }\r\n        else {\r\n            samples12Bit.push((samples[i] & 0xf) << 8 | samples[i + 1]);\r\n            i++;\r\n        }\r\n    }\r\n    // tslint:enable:no-bitwise\r\n    return samples12Bit;\r\n}\r\nexports.decodeUnsigned12BitData = decodeUnsigned12BitData;\r\nfunction decodeEEGSamples(samples) {\r\n    return decodeUnsigned12BitData(samples)\r\n        .map(function (n) { return 0.48828125 * (n - 0x800); });\r\n}\r\nexports.decodeEEGSamples = decodeEEGSamples;\r\nfunction parseTelemetry(data) {\r\n    // tslint:disable:object-literal-sort-keys\r\n    return {\r\n        sequenceId: data.getUint16(0),\r\n        batteryLevel: data.getUint16(2) / 512.,\r\n        fuelGaugeVoltage: data.getUint16(4) * 2.2,\r\n        // Next 2 bytes are probably ADC millivolt level, not sure\r\n        temperature: data.getUint16(8),\r\n    };\r\n    // tslint:enable:object-literal-sort-keys\r\n}\r\nexports.parseTelemetry = parseTelemetry;\r\nfunction parseImuReading(data, scale) {\r\n    function sample(startIndex) {\r\n        return {\r\n            x: scale * data.getInt16(startIndex),\r\n            y: scale * data.getInt16(startIndex + 2),\r\n            z: scale * data.getInt16(startIndex + 4),\r\n        };\r\n    }\r\n    // tslint:disable:object-literal-sort-keys\r\n    return {\r\n        sequenceId: data.getUint16(0),\r\n        samples: [sample(2), sample(8), sample(14)],\r\n    };\r\n    // tslint:enable:object-literal-sort-keys\r\n}\r\nfunction parseAccelerometer(data) {\r\n    return parseImuReading(data, 0.0000610352);\r\n}\r\nexports.parseAccelerometer = parseAccelerometer;\r\nfunction parseGyroscope(data) {\r\n    return parseImuReading(data, 0.0074768);\r\n}\r\nexports.parseGyroscope = parseGyroscope;\r\n"},"sourceMaps":{"js":{"version":3,"file":"muse-parse.js","sourceRoot":"","sources":["../../src/lib/muse-parse.ts"],"names":[],"mappings":";;AACA,4CAA8D;AAI9D,sBAA6B,WAA+B;IACxD,OAAO,WAAW,CAAC,IAAI,CACnB,qBAAS,CAAC,UAAC,IAAI,IAAK,OAAA,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,EAAd,CAAc,CAAC,EACnC,gBAAI,CAAC,UAAC,GAAG,EAAE,KAAK;QACZ,IAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YACvB,OAAO,KAAK,CAAC;SAChB;aAAM;YACH,OAAO,GAAG,GAAG,KAAK,CAAC;SACtB;IACL,CAAC,EAAE,EAAE,CAAC,EACN,kBAAM,CAAC,UAAC,KAAK,IAAK,OAAA,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAvB,CAAuB,CAAC,EAC1C,eAAG,CAAC,UAAC,KAAK,IAAK,OAAA,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAjB,CAAiB,CAAC,CACpC,CAAC;AACN,CAAC;AAbD,oCAaC;AAED,iCAAwC,OAAmB;IACvD,IAAM,YAAY,GAAG,EAAE,CAAC;IACxB,4BAA4B;IAC5B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACrC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;YACb,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;SAC5D;aAAM;YACH,YAAY,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5D,CAAC,EAAE,CAAC;SACP;KACJ;IACD,2BAA2B;IAC3B,OAAO,YAAY,CAAC;AACxB,CAAC;AAbD,0DAaC;AAED,0BAAiC,OAAmB;IAChD,OAAO,uBAAuB,CAAC,OAAO,CAAC;SAClC,GAAG,CAAC,UAAC,CAAC,IAAK,OAAA,UAAU,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,EAAxB,CAAwB,CAAC,CAAC;AAC9C,CAAC;AAHD,4CAGC;AAED,wBAA+B,IAAc;IACzC,0CAA0C;IAC1C,OAAO;QACH,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAC7B,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI;QACtC,gBAAgB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG;QACzC,0DAA0D;QAC1D,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;KACjC,CAAC;IACF,yCAAyC;AAC7C,CAAC;AAVD,wCAUC;AAED,yBAAyB,IAAc,EAAE,KAAa;IAClD,gBAAgB,UAAkB;QAC9B,OAAO;YACH,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC;YACpC,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,CAAC,CAAC;YACxC,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,CAAC,CAAC;SAC3C,CAAC;IACN,CAAC;IACD,0CAA0C;IAC1C,OAAO;QACH,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAC7B,OAAO,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;KAC9C,CAAC;IACF,yCAAyC;AAC7C,CAAC;AAED,4BAAmC,IAAc;IAC7C,OAAO,eAAe,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;AAC/C,CAAC;AAFD,gDAEC;AAED,wBAA+B,IAAc;IACzC,OAAO,eAAe,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;AAC5C,CAAC;AAFD,wCAEC","sourcesContent":[null]}},"error":null,"hash":"f57b5b40bde5cd390e16cdb2c2b8a109","cacheData":{"env":{}}}