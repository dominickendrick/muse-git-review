{"id":"../node_modules/muse-js/dist/lib/zip-samples.js","dependencies":[{"name":"/Users/dominic_kendrick/code/muse-git-review/node_modules/muse-js/dist/lib/zip-samples.js.map","includedInParent":true,"mtime":1574677530617},{"name":"/Users/dominic_kendrick/code/muse-git-review/package.json","includedInParent":true,"mtime":1574683923823},{"name":"/Users/dominic_kendrick/code/muse-git-review/node_modules/muse-js/package.json","includedInParent":true,"mtime":1574677530617},{"name":"rxjs","loc":{"line":3,"column":21},"parent":"/Users/dominic_kendrick/code/muse-git-review/node_modules/muse-js/dist/lib/zip-samples.js","resolved":"/Users/dominic_kendrick/code/muse-git-review/node_modules/rxjs/_esm5/index.js"},{"name":"rxjs/operators","loc":{"line":4,"column":26},"parent":"/Users/dominic_kendrick/code/muse-git-review/node_modules/muse-js/dist/lib/zip-samples.js","resolved":"/Users/dominic_kendrick/code/muse-git-review/node_modules/rxjs/_esm5/operators/index.js"},{"name":"./../muse","loc":{"line":5,"column":21},"parent":"/Users/dominic_kendrick/code/muse-git-review/node_modules/muse-js/dist/lib/zip-samples.js","resolved":"/Users/dominic_kendrick/code/muse-git-review/node_modules/muse-js/dist/muse.js"}],"generated":{"js":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar rxjs_1 = require(\"rxjs\");\r\nvar operators_1 = require(\"rxjs/operators\");\r\nvar muse_1 = require(\"./../muse\");\r\nfunction zipSamples(eegReadings) {\r\n    var buffer = [];\r\n    var lastTimestamp = null;\r\n    return eegReadings.pipe(operators_1.mergeMap(function (reading) {\r\n        if (reading.timestamp !== lastTimestamp) {\r\n            lastTimestamp = reading.timestamp;\r\n            if (buffer.length) {\r\n                var result = rxjs_1.from([buffer.slice()]);\r\n                buffer.splice(0, buffer.length, reading);\r\n                return result;\r\n            }\r\n        }\r\n        buffer.push(reading);\r\n        return rxjs_1.from([]);\r\n    }), operators_1.concat(rxjs_1.from([buffer])), operators_1.mergeMap(function (readings) {\r\n        var result = readings[0].samples.map(function (x, index) {\r\n            var data = [NaN, NaN, NaN, NaN, NaN];\r\n            for (var _i = 0, readings_1 = readings; _i < readings_1.length; _i++) {\r\n                var reading = readings_1[_i];\r\n                data[reading.electrode] = reading.samples[index];\r\n            }\r\n            return {\r\n                data: data,\r\n                index: readings[0].index,\r\n                timestamp: readings[0].timestamp + index * 1000. / muse_1.EEG_FREQUENCY,\r\n            };\r\n        });\r\n        return rxjs_1.from(result);\r\n    }));\r\n}\r\nexports.zipSamples = zipSamples;\r\n"},"sourceMaps":{"js":{"version":3,"file":"zip-samples.js","sourceRoot":"","sources":["../../src/lib/zip-samples.ts"],"names":[],"mappings":";;AAAA,6BAAwC;AACxC,4CAAkD;AAClD,kCAA0C;AAS1C,oBAA2B,WAAmC;IAC1D,IAAM,MAAM,GAAiB,EAAE,CAAC;IAChC,IAAI,aAAa,GAAkB,IAAI,CAAC;IACxC,OAAO,WAAW,CAAC,IAAI,CACnB,oBAAQ,CAA2B,UAAC,OAAO;QACvC,IAAI,OAAO,CAAC,SAAS,KAAK,aAAa,EAAE;YACrC,aAAa,GAAG,OAAO,CAAC,SAAS,CAAC;YAClC,IAAI,MAAM,CAAC,MAAM,EAAE;gBACf,IAAM,MAAM,GAAG,WAAI,CAAC,CAAK,MAAM,SAAE,CAAC,CAAC;gBACnC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;gBACzC,OAAO,MAAM,CAAC;aACjB;SACJ;QACD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACrB,OAAO,WAAI,CAAC,EAAE,CAAC,CAAC;IACpB,CAAC,CAAC,EACF,kBAAM,CAAC,WAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EACtB,oBAAQ,CAAC,UAAC,QAAsB;QAC5B,IAAM,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,UAAC,CAAC,EAAE,KAAK;YAC5C,IAAM,IAAI,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YACvC,KAAsB,UAAQ,EAAR,qBAAQ,EAAR,sBAAQ,EAAR,IAAQ;gBAAzB,IAAM,OAAO,iBAAA;gBACd,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;aACpD;YACD,OAAO;gBACH,IAAI,MAAA;gBACJ,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK;gBACxB,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,KAAK,GAAG,KAAK,GAAG,oBAAa;aACnE,CAAC;QACN,CAAC,CAAC,CAAC;QACH,OAAO,WAAI,CAAC,MAAM,CAAC,CAAC;IACxB,CAAC,CAAC,CACL,CAAC;AACN,CAAC;AAhCD,gCAgCC","sourcesContent":[null]}},"error":null,"hash":"ef09d290fe71dc1d26cc975b53001804","cacheData":{"env":{}}}